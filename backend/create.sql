create table categoria (id bigserial not null, nome varchar(255), primary key (id));
create table cidade (estado_id bigint, id bigserial not null, nome varchar(255), primary key (id));
create table cliente (tipo integer, id bigserial not null, cpf_ou_cnpj varchar(255), email varchar(255) unique, nome varchar(255), senha varchar(255), username varchar(255), primary key (id));
create table cliente_roles (cliente_id bigint not null, role_id bigint not null, primary key (cliente_id, role_id));
create table endereco (cidade_id bigint, cliente_id bigint, id bigserial not null, bairro varchar(255), cep varchar(255), complemento varchar(255), logradouro varchar(255), numero varchar(255), primary key (id));
create table estado (id bigserial not null, nome varchar(255), primary key (id));
create table item_pedido (desconto float(53), preco float(53), quantidade integer, pedido_id bigint not null, produto_id bigint not null, primary key (pedido_id, produto_id));
create table pagamento (estado integer, pedido_id bigint not null, primary key (pedido_id));
create table pagamento_com_boleto (data_pagamento timestamp(6), data_vencimento timestamp(6), pedido_id bigint not null, primary key (pedido_id));
create table pagamento_com_cartao (numero_de_parcelas integer, data_validade timestamp(6), pedido_id bigint not null, cvv varchar(255), numero_do_cartao varchar(255), primary key (pedido_id));
create table pedido (cliente_id bigint, endereco_id bigint, id bigserial not null, instante timestamp(6), primary key (id));
create table produto (preco float(53), quantidade integer, id bigserial not null, nome varchar(255), primary key (id));
create table produto_categoria (categoria_id bigint not null, produto_id bigint not null);
create table roles (id bigserial not null, name varchar(20) check (name in ('ROLE_USER','ROLE_MODERATOR','ROLE_ADMIN')), primary key (id));
create table telefone (cliente_id bigint not null, telefones varchar(255));
alter table if exists cidade add constraint FKkworrwk40xj58kevvh3evi500 foreign key (estado_id) references estado;
alter table if exists cliente_roles add constraint FKa11r1w08dx3liy6fr1p6w0xct foreign key (role_id) references roles;
alter table if exists cliente_roles add constraint FKdrshtg7is7fbxhuehuamwyx57 foreign key (cliente_id) references cliente;
alter table if exists endereco add constraint FK8b1kcb3wucapb8dejshyn5fsx foreign key (cidade_id) references cidade;
alter table if exists endereco add constraint FK8s7ivtl4foyhrfam9xqom73n9 foreign key (cliente_id) references cliente;
alter table if exists item_pedido add constraint FK60ym08cfoysa17wrn1swyiuda foreign key (pedido_id) references pedido;
alter table if exists item_pedido add constraint FKtk55mn6d6bvl5h0no5uagi3sf foreign key (produto_id) references produto;
alter table if exists pagamento add constraint FKthad9tkw4188hb3qo1lm5ueb0 foreign key (pedido_id) references pedido;
alter table if exists pagamento_com_boleto add constraint FKcr74vrxf8nfph0knq2bho8doo foreign key (pedido_id) references pagamento;
alter table if exists pagamento_com_cartao add constraint FKta3cdnuuxclwfh52t4qi432ow foreign key (pedido_id) references pagamento;
alter table if exists pedido add constraint FK30s8j2ktpay6of18lbyqn3632 foreign key (cliente_id) references cliente;
alter table if exists pedido add constraint FKsot2og0lvhm2t4kuu9s2obef3 foreign key (endereco_id) references endereco;
alter table if exists produto_categoria add constraint FKq3g33tp7xk2juh53fbw6y4y57 foreign key (categoria_id) references categoria;
alter table if exists produto_categoria add constraint FK1c0y58d3n6x3m6euv2j3h64vt foreign key (produto_id) references produto;
alter table if exists telefone add constraint FK8aafha0njkoyoe3kvrwsy3g8u foreign key (cliente_id) references cliente;
INSERT INTO ESTADO (NOME) VALUES ('São Paulo');
INSERT INTO ESTADO (NOME) VALUES ('Rio de Janeiro');
INSERT INTO ESTADO (NOME) VALUES ('Minas Gerais');
INSERT INTO CIDADE (ESTADO_ID, NOME) VALUES (1, 'São Paulo');
INSERT INTO CIDADE (ESTADO_ID, NOME) VALUES (2, 'Rio de Janeiro');
INSERT INTO CIDADE (ESTADO_ID, NOME) VALUES (3, 'Belo Horizonte');
INSERT INTO CLIENTE (TIPO, CPF_OU_CNPJ, EMAIL, NOME, SENHA, USERNAME) VALUES (1, '12345678900', 'joao@example.com', 'João da Silva', 'senha123', 'joaosilva');
INSERT INTO CLIENTE (TIPO, CPF_OU_CNPJ, EMAIL, NOME, SENHA, USERNAME) VALUES (2, '98765432100', 'maria@example.com', 'Maria Souza', 'senha456', 'mariasouza');
INSERT INTO ROLES (NAME) VALUES ('ROLE_USER');
INSERT INTO ROLES (NAME) VALUES ('ROLE_MODERATOR');
INSERT INTO ROLES (NAME) VALUES ('ROLE_ADMIN');
INSERT INTO CLIENTE_ROLES (CLIENTE_ID, ROLE_ID) VALUES (1, 1);
INSERT INTO CLIENTE_ROLES (CLIENTE_ID, ROLE_ID) VALUES (1, 2);
INSERT INTO CLIENTE_ROLES (CLIENTE_ID, ROLE_ID) VALUES (2, 1);
INSERT INTO CATEGORIA (NOME) VALUES ('Eletrônicos');
INSERT INTO CATEGORIA (NOME) VALUES ('Roupas');
INSERT INTO CATEGORIA (NOME) VALUES ('Alimentos');
INSERT INTO PRODUTO (PRECO, NOME, QUANTIDADE) VALUES (1000.00, 'Smartphone', 2);
INSERT INTO PRODUTO (PRECO, NOME, QUANTIDADE) VALUES (150.00, 'Camiseta', 2);
INSERT INTO PRODUTO (PRECO, NOME, QUANTIDADE) VALUES (10.00, 'Arroz', 2);
INSERT INTO PRODUTO_CATEGORIA (PRODUTO_ID, CATEGORIA_ID) VALUES (1, 1);
INSERT INTO PRODUTO_CATEGORIA (PRODUTO_ID, CATEGORIA_ID) VALUES (2, 2);
INSERT INTO PRODUTO_CATEGORIA (PRODUTO_ID, CATEGORIA_ID) VALUES (3, 3);
INSERT INTO ENDERECO (CIDADE_ID, CLIENTE_ID, BAIRRO, CEP, COMPLEMENTO, LOGRADOURO, NUMERO) VALUES (1, 1, 'Centro', '12345-678', 'Apto 101', 'Rua A', '123');
INSERT INTO ENDERECO (CIDADE_ID, CLIENTE_ID, BAIRRO, CEP, COMPLEMENTO, LOGRADOURO, NUMERO) VALUES (2, 2, 'Copacabana', '98765-432', 'Casa', 'Avenida B', '456');
INSERT INTO TELEFONE (CLIENTE_ID, TELEFONES) VALUES (1, '+55 11 1234-5678');
INSERT INTO TELEFONE (CLIENTE_ID, TELEFONES) VALUES (1, '+55 11 9876-5432');
INSERT INTO TELEFONE (CLIENTE_ID, TELEFONES) VALUES (2, '+55 21 5555-5555');
INSERT INTO PEDIDO (CLIENTE_ID, ENDERECO_ID, INSTANTE) VALUES (1, 1, NOW());
INSERT INTO PEDIDO (CLIENTE_ID, ENDERECO_ID, INSTANTE) VALUES (2, 2, NOW());
INSERT INTO ITEM_PEDIDO (DESCONTO, PRECO, QUANTIDADE, PEDIDO_ID, PRODUTO_ID) VALUES (0.10, 900.00, 1, 1, 1);
INSERT INTO ITEM_PEDIDO (DESCONTO, PRECO, QUANTIDADE, PEDIDO_ID, PRODUTO_ID) VALUES (0.05, 142.50, 2, 1, 2);
INSERT INTO ITEM_PEDIDO (DESCONTO, PRECO, QUANTIDADE, PEDIDO_ID, PRODUTO_ID) VALUES (0.00, 10.00, 3, 2, 3);
INSERT INTO PAGAMENTO (ESTADO, PEDIDO_ID) VALUES (1, 1);
INSERT INTO PAGAMENTO (ESTADO, PEDIDO_ID) VALUES (2, 2);
INSERT INTO PAGAMENTO_COM_BOLETO (DATA_PAGAMENTO, DATA_VENCIMENTO, PEDIDO_ID) VALUES (NOW(), NOW() + INTERVAL '7 days', 1);
INSERT INTO PAGAMENTO_COM_BOLETO (DATA_PAGAMENTO, DATA_VENCIMENTO, PEDIDO_ID) VALUES (NOW(), NOW() + INTERVAL '10 days', 2);
INSERT INTO PAGAMENTO_COM_CARTAO (NUMERO_DE_PARCELAS, NUMERO_DO_CARTAO, CVV, DATA_VALIDADE, PEDIDO_ID) VALUES (3, '1234567890123456', '123', '2024-09-01', 1);
INSERT INTO PAGAMENTO_COM_CARTAO (NUMERO_DE_PARCELAS, NUMERO_DO_CARTAO, CVV, DATA_VALIDADE, PEDIDO_ID) VALUES (2, '9876543210987654', '456', '2024-09-01', 2);
